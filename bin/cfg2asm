#!/usr/bin/env ruby

require 'seafoam'

file, verbosity = ARGV

parser = Seafoam::CFG::CFGParser.new(file)
parser.skip_over_cfg 'After code installation'
nmethod = parser.read_nmethod

disassembler = Seafoam::CFG::Disassembler.new
puts "Disassembling #{file}:"
disassembler.disassemble(nmethod, verbosity.to_i)
